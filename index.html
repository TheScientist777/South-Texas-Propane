<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>South Texas Propane</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/css/bootstrap.min.css" integrity="sha384-r4NyP46KrjDleawBgD5tp8Y7UzmLA05oM1iAEQ17CSuDqnUK2+k9luXQOfXJCJ4I" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="index.css">
</head>

<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
            <!-- Company Logo -->
            <a class="navbar-brand" href="#">
                <img src="company-logo.png" alt="Company Logo" style="height: 30px; margin-right: 10px;">
                South Texas Propane
            </a>

            <!-- Centered Search Bar -->
            <form class="d-flex mx-auto" style="width: 50%;">
                <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                <button class="btn btn-outline-success" type="submit">Search</button>
            </form>

            <!-- Right-aligned Icons (Profile+Cart+Building+WiFi+Newspaper) -->
            <div class="d-flex">
                <a class="nav-link" href="#" data-toggle="modal" data-target="#locationModal"><i class="fas fa-building"></i></a>
                <a class="nav-link" href="checkout.html"><i class="fas fa-shopping-cart"></i></a>
                <a class="nav-link" href="#"><i class="fas fa-user"></i></a>
                <a class="nav-link" href="#" data-toggle="modal" data-target="#newsModal"><i class="fas fa-newspaper"></i></a>
                <span id="wifiIcon"><i class="fas fa-wifi"></i></span>
            </div>
        </div>
    </nav>

    <!-- Carousel -->
    <div id="bannerCarousel" class="carousel slide" data-ride="carousel">
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="Service bobtail.jpeg" class="d-block w-100" alt="Banner 1">
            </div>
            <div class="carousel-item">
                <img src="Business.jpg" class="d-block w-100" alt="Banner 2">
            </div>
            <div class="carousel-item">
                <img src="Dogs.jpeg" class="d-block w-100" alt="Banner 3">
            </div>
            <div class="carousel-item">
                <img src="Nuts and Washers.jpg" class="d-block w-100" alt="Banner 4">
            </div>
            <div class="carousel-item">
                <img src="Classic Car.jpeg" class="d-block w-100" alt="Banner 5">
            </div>
        </div>
        <a class="carousel-control-prev" href="#bannerCarousel" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#bannerCarousel" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>

    <!-- Location Pop-up Menu -->
    <div class="modal fade" id="locationModal" tabindex="-1" aria-labelledby="locationModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="locationModalLabel">Select Location</h5>
                    <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <ul class="list-group">
                        <li class="list-group-item">
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="location" id="location1" value="location1">
                                <label class="form-check-label" for="location1">
                                    3803 E Farm to Market 2812, Edinburg, TX 78542
                                </label>
                            </div>
                        </li>
                        <li class="list-group-item">
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="location" id="location2" value="location2">
                                <label class="form-check-label" for="location2">
                                    Location 2
                                </label>
                            </div>
                        </li>
                        <li class="list-group-item">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="useLocation">
                                <label class="form-check-label" for="useLocation">
                                    Use my location to find the closest shop
                                </label>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Select</button>
                </div>
            </div>
        </div>
    </div>

    <!-- News Pop-up Menu -->
    <div class="modal fade" id="newsModal" tabindex="-1" aria-labelledby="newsModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="newsModalLabel">News and Updates</h5>
                    <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <!-- News and updates content here -->
                    <h6>6/14/2024</h6>
                    <p>Live server has been fixed and is now up and running. The measurements for the buliding have been written down and the 3D model is currenting under devlopment.</p>
                    <h6>6/12/2024</h6>
                    <p>I have been tasked with making use of the company's patented website.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Weekly Sale Items -->
    <section class="container my-5">
        <h2 class="text-center mb-4">Weekly Sale Items</h2>
        <div class="row">
            <div class="col-md-4 mb-4">
                <div class="card">
                    <img src="Outdoor Gourment Multifunction Cooker.png" class="card-img-top" alt="Item 1">
                    <div class="card-body">
                        <h5 class="card-title">Outdoor Gourmet Multifunction Cooker</h5>
                        <p class="card-text">Description of Item 1</p>
                        <div class="price-line">
                            <span class="original-price">$249.99</span>
                            <span class="text-danger">20% Off</span>
                            <span class="sale-price">$199.99</span>
                        </div>
                        <p class="card-text">Expires: June 30, 2023</p>
                    </div>

                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card">
                    <img src="Wax Ring Bolt Kit.png" class="card-img-top" alt="Item 2">
                    <div class="card-body">
                        <h5 class="card-title">Wax Ring Kit</h5>
                        <p class="card-text">Description of Item 2</p>
                        <div class="price-line">
                            <span class="original-price">$9.50</span>
                            <span class="text-danger">20% Off</span>
                            <span class="sale-price">$8.55</span>
                        </div>
                        <p class="card-text">Expires: June 30, 2023</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card">
                    <img src="Ez_Weld_Multipurpose_PVC_Cement.png" class="card-img-top" alt="Item 3">
                    <div class="card-body">
                        <h5 class="card-title">Multipupose Cement</h5>
                        <p class="card-text">Description of Item 3</p>
                        <div class="price-line">
                            <span class="original-price">$9</span>
                            <span class="text-danger">15% Off</span>
                            <span class="sale-price">$7.65</span>
                        </div>
                        <p class="card-text">Expires: June 30, 2023</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Left-side Navbar and Main Content -->
    <div class="container-fluid">
        <div class="row">
            <nav class="col-md-3 col-lg-2 d-md-block bg-light sidebar">
                <div class="position-sticky pt-3">
                    <div class="accordion" id="categoryAccordion">
                        <!-- All accordion items go here -->
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="tanksHeading">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#tanksCollapse" aria-expanded="true" aria-controls="tanksCollapse">
                                    Tanks
                                </button>
                            </h2>
                            <div id="tanksCollapse" class="accordion-collapse collapse show" aria-labelledby="tanksHeading" data-bs-parent="#categoryAccordion">
                                <div class="accordion-body">
                                    <!-- Content for Tanks will be loaded here -->
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="accessoriesHeading">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#accessoriesCollapse" aria-expanded="false" aria-controls="accessoriesCollapse">
                                    Tank accessories
                                </button>
                            </h2>
                            <div id="accessoriesCollapse" class="accordion-collapse collapse" aria-labelledby="accessoriesHeading" data-bs-parent="#categoryAccordion">
                                <div class="accordion-body">
                                    <!-- Content for Tank accessories will be loaded here -->
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="electricalHeading">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#electricalCollapse" aria-expanded="false" aria-controls="electricalCollapse">
                                    Electrical
                                </button>
                            </h2>
                            <div id="electricalCollapse" class="accordion-collapse collapse" aria-labelledby="electricalHeading" data-bs-parent="#categoryAccordion">
                                <div class="accordion-body">
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="plumbingHeading">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#plumbingCollapse" aria-expanded="false" aria-controls="plumbingCollapse">
                                    Plumbing
                                </button>
                            </h2>
                            <div id="plumbingCollapse" class="accordion-collapse collapse" aria-labelledby="plumbingHeading" data-bs-parent="#categoryAccordion">
                                <div class="accordion-body">
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="hardwareHeading">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#hardwareCollapse" aria-expanded="false" aria-controls="hardwareCollapse">
                                    Hardware
                                </button>
                            </h2>
                            <div id="hardwareCollapse" class="accordion-collapse collapse" aria-labelledby="hardwareHeading" data-bs-parent="#categoryAccordion">
                                <div class="accordion-body">
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="boltsHeading">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#boltsCollapse" aria-expanded="false" aria-controls="boltsCollapse">
                                    Bolts
                                </button>
                            </h2>
                            <div id="boltsCollapse" class="accordion-collapse collapse" aria-labelledby="boltsHeading" data-bs-parent="#categoryAccordion">
                                <div class="accordion-body">
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="screwsHeading">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#screwsCollapse" aria-expanded="false" aria-controls="screwsCollapse">
                                    Screws
                                </button>
                            </h2>
                            <div id="screwsCollapse" class="accordion-collapse collapse" aria-labelledby="screwsHeading" data-bs-parent="#categoryAccordion">
                                <div class="accordion-body">
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="fastenalHeading">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#fastenalCollapse" aria-expanded="false" aria-controls="fastenalCollapse">
                                    Fastenal
                                </button>
                            </h2>
                            <div id="fastenalCollapse" class="accordion-collapse collapse" aria-labelledby="fastenalHeading" data-bs-parent="#categoryAccordion">
                                <div class="accordion-body">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </nav>

            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div id="itemsContainer">
                    <!-- Items will be loaded here -->
                </div>
            </main>
        </div>
    </div>
    <!-- BootStrap scripts -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://kit.fontawesome.com/a076d05399.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXlAHjVt8i8eW58RqldRn3U6nPeGzIdkNs3sn4xQ0o+8pcY1F2P17VJ6uBYD" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/js/bootstrap.min.js" integrity="sha384-oesi62hOLfzrys4LxRF63OJCXdXDipiYWBnvTl9Y9/TRlw5xlKIEHpNyvvDShgf/" crossorigin="anonymous"></script>

    <script>
        $(document).ready(function() {
            $('.carousel').carousel();
        });

        document.addEventListener('DOMContentLoaded', function() {
            const accordionButtons = document.querySelectorAll('.accordion-button');
            const itemsContainer = document.getElementById('itemsContainer');
            let currentPage = 1;
            let currentCategory = '';
            const itemsPerPage = 7;

            accordionButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const category = this.textContent.trim();
                    currentCategory = category;
                    currentPage = 1;
                    loadItems(category);
                });
            });

            function loadItems(category) {
                console.log('Loading items for:', category);
                const items = getItemsByCategory(category);
                displayItems(items, category);
            }

            function getItemsByCategory(category) {
                if (category === 'Fastenal') {
                    return getFastenalItems();
                } else if (category === 'Screws') {
                    return getScrewsItems();
                } else {
                    return getDummyItems(category);
                }
            }

            function getFastenalItems() {
                const fastenalItems = [];
                for (let i = 1; i <= 72; i++) {
                    if (i === 2) {
                        fastenalItems.push({
                            name: '1/4"-20 ASTM A563 Grade A Zinc Finish Steel Jam Nut',
                            price: '15¢',
                            image: 'Fastenal No 1136202.jpg',
                            id: 'fastenal-jam-nut'
                        });
                    } else if (i === 3) {
                        fastenalItems.push({
                            name: '1/4"-20 Grade C Zinc Finish Steel Top Lock Nut',
                            price: '20¢',
                            image: 'Fastenal No 1137260.jpg',
                            id: 'fastenal-top-lock-nut'
                        });
                    } else if (i === 4) {
                        fastenalItems.push({
                            name: '1/4"-28 Zinc Finish Grade A Finished Hex Nut',
                            price: '15¢',
                            image: 'Fastenal No 36152.jpg',
                            id: 'fastenal-hex-nut'
                        });
                    } else if (i === 5) {
                        fastenalItems.push({
                            name: '1/4"-28 Grade C Zinc Finish Steel Top Lock Nut',
                            price: '40¢',
                            image: 'Fastenal No 1137300.jpg',
                            id: 'fastenal-top-lock-nut-28'
                        });
                    } else {
                        fastenalItems.push({
                            name: `Fastenal Item ${i}`,
                            price: `$${(Math.random() * 50 + 5).toFixed(2)}`,
                            image: 'company-logo.png',
                            id: `fastenal-item-${i}`
                        });
                    }
                }
                return fastenalItems;
            }

            function getScrewsItems() {
                const screwsItems = [];
                for (let i = 1; i <= 12; i++) {
                    if (i === 1) {
                        screwsItems.push({
                            name: '#8 x 1-3/4 in.',
                            price: '1 lb = $8 444pcs and 1/2 lb = $4.50 222pcs',
                            image: 'grip-rite-wood-screws-3_4 22.jpg',
                            id: 'screws-wood-8x1-75'
                        });
                    } else if (i === 2) {
                        screwsItems.push({
                            name: '#6 x 1 in. #2 Phillips',
                            price: '1 lb = $8 364pcs and 1/2 lb = $4.50 182pcs',
                            image: 'grip-rite-drywall-screws-1inch.jpg',
                            id: 'screws-drywall-6x1-phillips'
                        });
                    } else if (i === 3) {
                        screwsItems.push({
                            name: '#9 x 2-1/2 in. #2 Phillips',
                            price: '1 lb = $10 and 1/2 lb = $4',
                            image: 'grip-rite-deck-screws-2 1:2 in.jpg',
                            id: 'screws-deck-10x2-5'
                        });
                    } else {
                        screwsItems.push({
                            name: `Screws Item ${i}`,
                            price: `$${(Math.random() * 15 + 3).toFixed(2)}`,
                            image: 'company-logo.png',
                            id: `screws-item-${i}`
                        });
                    }
                }
                return screwsItems;
            }

            function getDummyItems(category) {
                return [
                    { name: `${category} Item 1`, price: '$19.99', image: 'company-logo.png', id: `${category.toLowerCase()}-item-1` },
                    { name: `${category} Item 2`, price: '$29.99', image: 'company-logo.png', id: `${category.toLowerCase()}-item-2` },
                    { name: `${category} Item 3`, price: '$39.99', image: 'company-logo.png', id: `${category.toLowerCase()}-item-3` },
                ];
            }

            function displayItems(allItems, category) {
                console.log('displayItems called with:', category, 'items:', allItems.length);
                const startIndex = (currentPage - 1) * itemsPerPage;
                const endIndex = startIndex + itemsPerPage;
                const itemsToShow = allItems.slice(startIndex, endIndex);
                const totalPages = Math.ceil(allItems.length / itemsPerPage);

                itemsContainer.innerHTML = '';
                
                itemsToShow.forEach(item => {
                    console.log('Displaying item:', item.name, 'with image:', item.image);
                    const itemElement = document.createElement('div');
                    itemElement.className = 'item mb-3 p-3 border rounded product-card';
                    itemElement.style.cursor = 'pointer';
                    itemElement.innerHTML = `
                        <div class="row align-items-center">
                            <div class="col-md-3">
                                <img src="${item.image}" alt="${item.name}" class="img-fluid rounded" style="max-height: 120px; object-fit: cover;" onerror="console.log('Image failed to load:', '${item.image}'); this.src='company-logo.png';">
                            </div>
                            <div class="col-md-9">
                                <h5 class="mb-2">${item.name}</h5>
                                <p class="text-success fw-bold mb-2">${item.price}</p>
                                <button class="btn btn-primary btn-sm">View Details</button>
                            </div>
                        </div>
                    `;
                    
                    itemElement.onclick = () => {
                        window.location.href = `product-detail.html?id=${item.id}&name=${encodeURIComponent(item.name)}&price=${encodeURIComponent(item.price)}&image=${encodeURIComponent(item.image)}`;
                    };
                    
                    itemsContainer.appendChild(itemElement);
                });

                // Add pagination controls if needed
                if (totalPages > 1) {
                    const paginationDiv = document.createElement('div');
                    paginationDiv.className = 'pagination-controls mt-4 text-center';
                    
                    const prevButton = document.createElement('button');
                    prevButton.className = 'btn btn-outline-primary me-2';
                    prevButton.textContent = 'Previous';
                    prevButton.disabled = currentPage === 1;
                    prevButton.onclick = () => {
                        if (currentPage > 1) {
                            currentPage--;
                            loadItems(currentCategory);
                        }
                    };

                    const pageInfo = document.createElement('span');
                    pageInfo.className = 'mx-3';
                    pageInfo.textContent = `Page ${currentPage} of ${totalPages}`;

                    const nextButton = document.createElement('button');
                    nextButton.className = 'btn btn-outline-primary ms-2';
                    nextButton.textContent = 'Next';
                    nextButton.disabled = currentPage === totalPages;
                    nextButton.onclick = () => {
                        if (currentPage < totalPages) {
                            currentPage++;
                            loadItems(currentCategory);
                        }
                    };

                    paginationDiv.appendChild(prevButton);
                    paginationDiv.appendChild(pageInfo);
                    paginationDiv.appendChild(nextButton);
                    itemsContainer.appendChild(paginationDiv);
                }
            }

            // Load initial items
            loadItems('Tanks');
        });
    </script>